= ESP32 Components documentation

WARNING: This documentation describes the current behavior of ESP32 components.
Internal APIs or hooks may evolve in the future.

== Button

The `Button` component allows you to listen to a physical button connected to a GPIO pin.
It automatically registers itself in the application update loop.

=== Wiring

|===
| ESP32 Pin | Button Pin

| GPIO (ex: GPIO32)
| One side of the button

| GND
| Other side of the button
|===

NOTE: The button uses an internal `PULL_DOWN` resistor.  
The button must connect the GPIO pin to **3.3V** when pressed.

=== Usage

[,python]
----
from src.components.button import Button
from src.utils.gpio import GPIO

button = Button(
    pin=GPIO.GPIO32,
    onPress=lambda: print("Button pressed"),
    onRelease=lambda: print("Button released")
)
----

=== Behavior

|===
| Event | Description

| `onPress`
| Called once when the button transitions from released to pressed

| `onRelease`
| Called once when the button transitions from pressed to released
|===

---

== Led

The `Led` component controls a single digital LED using a GPIO output.
It can also react to incoming frames if a `slug` is provided.

=== Wiring

|===
| ESP32 Pin | LED Pin

| GPIO (ex: GPIO2)
| LED anode (via resistor)

| GND
| LED cathode
|===

IMPORTANT: Always use a current-limiting resistor (typically 220Ω – 330Ω).

=== Usage

[,python]
----
from src.components.led import Led
from src.utils.gpio import GPIO

led = Led(
    pin=GPIO.GPIO2
)
----

=== Frame-based control (optional)

If a `slug` is provided, the LED reacts automatically to incoming frames.

[,python]
----
led = Led(
    pin=GPIO.GPIO2,
    slug="status-led"
)
----

When a frame contains a boolean payload matching the slug:
- `True` → LED ON
- `False` → LED OFF

---

== LedStrip

The `LedStrip` component controls an addressable LED strip (NeoPixel / WS2812).
It listens to incoming frames to toggle the strip state.

=== Wiring

|===
| ESP32 Pin | Led Strip Pin

| GPIO (ex: GPIO25)
| DIN (Data In)

| 5V / 3.3V
| VCC (depending on strip model)

| GND
| GND
|===

IMPORTANT:
- Ensure common ground between ESP32 and the LED strip.
- Some LED strips require an external 5V power supply.

=== Usage

[,python]
----
from src.components.led_strip import LedStrip
from src.utils.gpio import GPIO

led_strip = LedStrip(
    pin=GPIO.GPIO25,
    pixel_num=10
)
----

=== Frame-based control

You can bind the strip to a frame payload using a `slug`.

[,python]
----
led_strip = LedStrip(
    pin=GPIO.GPIO25,
    pixel_num=10,
    slug="main-strip"
)
----

When a boolean payload with the matching slug is received:
- `True` → all pixels ON (white)
- `False` → all pixels OFF

=== Default behavior

|===
| Action | Description

| `on()`
| Turns all pixels on with white color `(255, 255, 255)`

| `off()`
| Turns all pixels off
|===

NOTE: Color handling can be extended later but is currently fixed.
